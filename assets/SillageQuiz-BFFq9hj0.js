import{r as c,u as R,a as _,b as I,j as e,m as a,A as w,B as N,P as L,R as O,c as C}from"./index-BJXPf70g.js";const d=[{id:1,question:"Quelle intensité recherchez-vous ?",options:[{label:"Légère & Aérienne",value:"light"},{label:"Présente & Équilibrée",value:"moderate"},{label:"Intense & Signée",value:"intense"},{label:"Majestueuse & Rare",value:"royal"}]},{id:2,question:"Quel moment vous inspire le plus ?",options:[{label:"L'Aube Fraîche",value:"morning"},{label:"Le Zénith Solaire",value:"noon"},{label:"Le Crépuscule Doré",value:"evening"},{label:"La Nuit Profonde",value:"night"}]},{id:3,question:"Quelle matière vous touche le plus ?",options:[{label:"Fleurs Blanches",value:"floral"},{label:"Bois Précieux",value:"woody"},{label:"Épices Chaudes",value:"spicy"},{label:"Vanille & Ambre",value:"gourmand"}]}],T={initial:{opacity:0,y:20,filter:"blur(10px)"},animate:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.6,ease:"easeOut",when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-20,filter:"blur(10px)",transition:{duration:.4,ease:"easeInOut"}}},V={initial:{opacity:0,y:8,filter:"blur(6px)"},animate:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:"easeOut"}},exit:{opacity:0,y:-6,filter:"blur(6px)",transition:{duration:.3}}},M=({onComplete:n})=>e.jsxs(a.div,{className:"absolute inset-0 z-[50] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationComplete:n,children:[e.jsx(a.div,{className:"absolute w-full h-full bg-white/10 blur-3xl",initial:{opacity:0},animate:{opacity:[0,.5,0]},transition:{duration:.6,ease:"easeOut"}}),[...Array(12)].map((m,p)=>e.jsx(a.div,{className:"absolute rounded-full bg-[#D4AF37]",style:{width:Math.random()*2+"px",height:Math.random()*2+"px"},initial:{x:0,y:0,opacity:0},animate:{x:(Math.random()-.5)*600,y:(Math.random()-.5)*400,opacity:[0,1,0],scale:[0,1.5,0]},transition:{duration:.8,ease:"easeOut"}},p))]}),P=({onComplete:n})=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8",children:[e.jsx("div",{className:"relative w-12 h-20",children:e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("svg",{viewBox:"0 0 100 160",className:"w-full h-full absolute z-20",children:e.jsx("path",{d:"M30 10 H70 V30 H90 V150 H10 V30 H30 V10 Z",fill:"none",stroke:"#D4AF37",strokeWidth:"1",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke"})}),e.jsx(a.div,{className:"absolute bottom-0 left-0 right-0 bg-[#D4AF37]/80 z-10",initial:{height:"0%"},animate:{height:"85%"},transition:{duration:1.8,ease:"easeInOut"},onAnimationComplete:()=>setTimeout(n,400),style:{width:"80%",left:"10%",bottom:"5%"}})]})}),e.jsx(a.p,{className:"mt-4 font-serif text-xs text-[#D4AF37]/70 italic tracking-wide",initial:{opacity:0},animate:{opacity:[0,1,.5,1]},transition:{duration:2},children:"Création de votre accord..."})]}),E=()=>{const[n,m]=c.useState("intro"),[p,h]=c.useState(!1),[o,f]=c.useState(0),[x,g]=c.useState({}),[b,v]=c.useState([]),{products:u,isInitialized:y,initializeProducts:j}=R(),{addToCart:k}=_();I(),c.useEffect(()=>{y||j()},[y,j]);const A=()=>{h(!0),setTimeout(()=>{m("quiz"),setTimeout(()=>h(!1),600)},200)},F=()=>{m("intro"),f(0),g({}),v([])},S=t=>{const i=t[3];let s=null;i==="floral"?s="Floral":i==="woody"?s="Boisé":i==="spicy"?s="Épicé":i==="gourmand"&&(s="Gourmand"),t[2];let r=u.filter(l=>s&&l.families&&l.families.includes(s));r.length===0&&s&&(r=u.filter(l=>l.scent&&l.scent.toLowerCase().includes(s.toLowerCase()))),r.length===0&&t[2]==="morning"&&(r=u.filter(l=>l.families&&l.families.includes("Frais/Aquatique"))),r.length===0&&(r=u);const D=[...r].sort(()=>.5-Math.random());v(D.slice(0,3))},q=t=>{const i={...x,[d[o].id]:t};g(i),o<d.length-1?f(s=>s+1):(S(i),m("loading"))},z=t=>{const i=u.find(s=>s.id===t);if(i){if(i.stock===0){C.error("Ce produit est actuellement en rupture de stock");return}k({id:i.id,name:i.name,brand:i.brand,price:i.price,image:i.image||i.image_url||"",scent:i.scent,category:i.category||"mixte"}),C.success("Ajouté au panier")}},B=n==="results"?"min-h-[600px]":n==="intro"?"min-h-[160px]":"min-h-[380px]";return e.jsx("div",{className:"w-full flex justify-center px-4 md:px-0 my-12 animate-fade-up",children:e.jsxs(a.div,{className:`relative w-full max-w-5xl bg-[#0a0a0a] rounded-sm overflow-hidden border border-white/5 shadow-2xl transition-all duration-700 ease-[0.22, 1, 0.36, 1] ${B}`,layout:!0,children:[e.jsxs(w,{mode:"wait",children:[n==="intro"&&e.jsxs(a.div,{className:"flex flex-col md:flex-row items-center justify-between px-8 py-10 md:py-8 gap-6 md:gap-12",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.3}},children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start text-center md:text-left space-y-3",children:[e.jsx("span",{className:"text-[10px] font-medium tracking-[0.25em] text-amber-200/60 uppercase",children:"Diagnostic Olfactif Haute Couture"}),e.jsx("h2",{className:"font-serif text-2xl md:text-3xl text-[#F5F5F0] font-light leading-tight",children:"Trouvez votre signature"}),e.jsx("p",{className:"text-xs text-neutral-500 font-light tracking-wide max-w-md",children:"Une expérience immersive pour révéler le parfum qui capture votre essence."})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(N,{onClick:A,className:"bg-transparent border border-amber-200/30 text-amber-100 hover:bg-amber-900/10 hover:border-amber-200/60 hover:text-[#D4AF37] px-8 py-6 h-auto rounded-sm font-sans text-xs font-medium tracking-[0.15em] uppercase transition-all duration-500 ease-out group",children:["Commencer l'expérience",e.jsx("span",{className:"ml-3 opacity-50 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-500",children:"→"})]})})]},"intro"),n==="quiz"&&e.jsx(a.div,{className:"absolute inset-0 flex flex-col items-center justify-center p-8 md:p-12 bg-[#0a0a0a]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("span",{className:"text-[10px] text-neutral-600 tracking-[0.2em] uppercase font-light",children:["Question ",o+1," ",e.jsx("span",{className:"text-neutral-800 mx-2",children:"/"})," ",d.length]})}),e.jsx(w,{mode:"wait",children:e.jsxs(a.div,{variants:T,initial:"initial",animate:"animate",exit:"exit",className:"mb-10",children:[e.jsx("h3",{className:"font-serif text-xl md:text-2xl text-[#F5F5F0] mb-6 text-center font-light",children:d[o].question}),e.jsx(a.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",initial:"initial",animate:"animate",exit:"exit",children:d[o].options.map(t=>e.jsx(a.button,{onClick:()=>q(t.value),variants:V,className:"p-5 rounded-sm border border-white/5 bg-white/[0.02] hover:bg-white/[0.04] hover:border-amber-900/30 text-left transition-all duration-300 group active:scale-[0.99]",children:e.jsxs("span",{className:"flex justify-between items-center w-full",children:[e.jsx("span",{className:"block text-xs md:text-sm text-neutral-400 group-hover:text-amber-100/90 font-light tracking-wide transition-colors",children:t.label}),e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-neutral-800 group-hover:bg-[#D4AF37] transition-colors duration-500"})]})},t.value))})]},o)})]})},"quiz"),n==="loading"&&e.jsx(a.div,{className:"absolute inset-0 flex flex-col items-center justify-center bg-[#0a0a0a]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(P,{onComplete:()=>m("results")})},"loading"),n==="results"&&e.jsxs(a.div,{className:"absolute inset-0 flex flex-col items-center justify-start p-8 md:p-12 bg-[#0a0a0a] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:[e.jsxs("div",{className:"text-center mb-10 mt-4",children:[e.jsx("span",{className:"text-[9px] text-amber-200/50 tracking-[0.25em] uppercase mb-4 block",children:"Votre signature olfactive"}),e.jsx("h2",{className:"font-serif text-2xl md:text-3xl text-[#F5F5F0] mb-4 font-light",children:"Sélection Exclusive"}),e.jsxs("p",{className:"font-sans text-xs text-neutral-500 max-w-lg mx-auto font-light leading-relaxed tracking-wide",children:["Basé sur vos préférences pour ",x[3]==="floral"?"les fleurs blanches":x[3]==="woody"?"les bois précieux":x[3]==="spicy"?"les épices":"la vanille",", voici nos recommandations."]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-4xl mx-auto mb-10",children:[b.map((t,i)=>e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},className:"bg-white rounded-xl p-2 shadow-lg",children:e.jsx(L,{id:t.id,name:t.name,brand:t.brand,price:t.price,image:t.image||t.image_url||"",scent:t.scent,stock:t.stock,notes:t.notes,notes_tete:t.notes_tete,notes_coeur:t.notes_coeur,notes_fond:t.notes_fond,families:t.families,onAddToCart:z})},t.id)),b.length===0&&e.jsx("div",{className:"col-span-3 text-center text-neutral-500 text-sm",children:"Aucun résultat trouvé pour cette combinaison."})]}),e.jsx("div",{className:"flex justify-center pb-8",children:e.jsxs(N,{onClick:F,variant:"outline",className:"border-white/10 text-neutral-400 hover:text-white hover:bg-white/5 px-6 py-4 rounded-sm bg-transparent text-[10px] tracking-widest uppercase",children:[e.jsx(O,{className:"w-3 h-3 mr-2"}),"Recommencer"]})})]},"results")]}),p&&e.jsx(M,{onComplete:()=>{}})]})})};export{E as default};
//# sourceMappingURL=SillageQuiz-BFFq9hj0.js.map
