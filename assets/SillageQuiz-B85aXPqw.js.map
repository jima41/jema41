{"version":3,"file":"SillageQuiz-B85aXPqw.js","sources":["../../src/components/SillageQuiz.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ArrowRight, RotateCcw, Sparkles } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useAdminStore, type Product } from '@/store/useAdminStore';\nimport ProductCard from '@/components/ProductCard';\nimport { useCart } from '@/context/CartContext';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'sonner';\nimport type { OlfactoryFamily } from '@/lib/olfactory';\n\n// ============================================================================\n// CONSTANTS & DATA\n// ============================================================================\n\ntype Step = 'intro' | 'quiz' | 'loading' | 'results';\n\nconst QUESTIONS = [\n  {\n    id: 1,\n    question: \"Quelle intensité recherchez-vous ?\",\n    options: [\n      { label: \"Légère & Aérienne\", value: \"light\" },\n      { label: \"Présente & Équilibrée\", value: \"moderate\" },\n      { label: \"Intense & Signée\", value: \"intense\" },\n      { label: \"Majestueuse & Rare\", value: \"royal\" }\n    ]\n  },\n  {\n    id: 2,\n    question: \"Quel moment vous inspire le plus ?\",\n    options: [\n      { label: \"L'Aube Fraîche\", value: \"morning\" },\n      { label: \"Le Zénith Solaire\", value: \"noon\" },\n      { label: \"Le Crépuscule Doré\", value: \"evening\" },\n      { label: \"La Nuit Profonde\", value: \"night\" }\n    ]\n  },\n  {\n    id: 3,\n    question: \"Quelle matière vous touche le plus ?\",\n    options: [\n      { label: \"Fleurs Blanches\", value: \"floral\" },\n      { label: \"Bois Précieux\", value: \"woody\" },\n      { label: \"Épices Chaudes\", value: \"spicy\" },\n      { label: \"Vanille & Ambre\", value: \"gourmand\" }\n    ]\n  }\n];\n\n// ============================================================================\n// ANIMATIONS & SUB-COMPONENTS\n// ============================================================================\n\n// Motion variants for quiz transitions (diffusion olfactive)\nconst questionVariants = {\n  initial: { opacity: 0, y: 20, filter: 'blur(10px)' },\n  animate: {\n    opacity: 1,\n    y: 0,\n    filter: 'blur(0px)',\n    transition: { duration: 0.6, ease: 'easeOut', when: 'beforeChildren', staggerChildren: 0.1 }\n  },\n  exit: { opacity: 0, y: -20, filter: 'blur(10px)', transition: { duration: 0.4, ease: 'easeInOut' } }\n};\n\nconst optionVariant = {\n  initial: { opacity: 0, y: 8, filter: 'blur(6px)' },\n  animate: { opacity: 1, y: 0, filter: 'blur(0px)', transition: { duration: 0.45, ease: 'easeOut' } },\n  exit: { opacity: 0, y: -6, filter: 'blur(6px)', transition: { duration: 0.3 } }\n};\n\nconst SprayBurst = ({ onComplete }: { onComplete: () => void }) => {\n  return (\n    <motion.div\n      className=\"absolute inset-0 z-[50] flex items-center justify-center pointer-events-none\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      onAnimationComplete={onComplete}\n    >\n      {/* Subtle Mist Flash */}\n      <motion.div\n        className=\"absolute w-full h-full bg-white/10 blur-3xl\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: [0, 0.5, 0] }}\n        transition={{ duration: 0.6, ease: \"easeOut\" }}\n      />\n      \n      {/* Fine Golden Particles */}\n      {[...Array(12)].map((_, i) => (\n        <motion.div\n          key={i}\n          className=\"absolute rounded-full bg-[#D4AF37]\"\n          style={{ width: Math.random() * 2 + 'px', height: Math.random() * 2 + 'px' }}\n          initial={{ x: 0, y: 0, opacity: 0 }}\n          animate={{ \n            x: (Math.random() - 0.5) * 600, \n            y: (Math.random() - 0.5) * 400,\n            opacity: [0, 1, 0],\n            scale: [0, 1.5, 0]\n          }}\n          transition={{ duration: 0.8, ease: \"easeOut\" }}\n        />\n      ))}\n    </motion.div>\n  );\n};\n\nconst FillingBottle = ({ onComplete }: { onComplete: () => void }) => {\n  return (\n    <div className=\"flex flex-col items-center justify-center h-full py-8\">\n      <div className=\"relative w-12 h-20\">\n        <div className=\"absolute inset-0 overflow-hidden\">\n          <svg viewBox=\"0 0 100 160\" className=\"w-full h-full absolute z-20\">\n            <path\n              d=\"M30 10 H70 V30 H90 V150 H10 V30 H30 V10 Z\"\n              fill=\"none\"\n              stroke=\"#D4AF37\"\n              strokeWidth=\"1\"\n              strokeLinejoin=\"round\"\n              vectorEffect=\"non-scaling-stroke\"\n            />\n          </svg>\n          <motion.div\n            className=\"absolute bottom-0 left-0 right-0 bg-[#D4AF37]/80 z-10\"\n            initial={{ height: \"0%\" }}\n            animate={{ height: \"85%\" }}\n            transition={{ duration: 1.8, ease: \"easeInOut\" }}\n            onAnimationComplete={() => setTimeout(onComplete, 400)}\n            style={{ width: '80%', left: '10%', bottom: '5%' }}\n          />\n        </div>\n      </div>\n      <motion.p \n        className=\"mt-4 font-serif text-xs text-[#D4AF37]/70 italic tracking-wide\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: [0, 1, 0.5, 1] }}\n        transition={{ duration: 2 }}\n      >\n        Création de votre accord...\n      </motion.p>\n    </div>\n  );\n};\n\n// ============================================================================\n// MAIN COMPONENT\n// ============================================================================\n\nconst DiagnosticRitual = () => {\n  const [step, setStep] = useState<Step>('intro');\n  const [isSpraying, setIsSpraying] = useState(false);\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [answers, setAnswers] = useState<Record<number, string>>({});\n  const [recommendations, setRecommendations] = useState<Product[]>([]);\n  \n  const { products, isInitialized, initializeProducts } = useAdminStore();\n  const { addToCart } = useCart();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!isInitialized) {\n      initializeProducts();\n    }\n  }, [isInitialized, initializeProducts]);\n\n  const handleStart = () => {\n    setIsSpraying(true);\n    setTimeout(() => {\n        setStep('quiz');\n        setTimeout(() => setIsSpraying(false), 600); \n    }, 200);\n  };\n\n  const handleRestart = () => {\n    setStep('intro');\n    setCurrentQuestionIndex(0);\n    setAnswers({});\n    setRecommendations([]);\n  };\n\n  const calculateRecommendations = (finalAnswers: Record<number, string>) => {\n    // Logic based on Q3 (Matter) mainly\n    const matter = finalAnswers[3];\n    let family: OlfactoryFamily | null = null;\n\n    if (matter === 'floral') family = 'Floral';\n    else if (matter === 'woody') family = 'Boisé';\n    else if (matter === 'spicy') family = 'Épicé';\n    else if (matter === 'gourmand') family = 'Gourmand'; // Could also map to Oriental\n\n    // Fallback or refinement based on Q2 (Moment)\n    // if Q2 is 'morning' -> maybe 'Frais/Aquatique' or lighter floral?\n    // if Q2 is 'night' -> Oriental / Intense\n    \n    if (finalAnswers[2] === 'morning' && matter === 'floral') {\n        // Maybe check if we have enough products, otherwise stick to floral\n    }\n\n    let matching = products.filter(p => \n        family && p.families && p.families.includes(family)\n    );\n\n    if (matching.length === 0 && family) {\n        matching = products.filter(p => p.scent && p.scent.toLowerCase().includes(family!.toLowerCase()));\n    }\n    \n    // If we still have no matches (or family was null), try to map from Q1/Q2\n    if (matching.length === 0) {\n        // Fallback random or specific logic\n        // E.g. \"morning\" -> Frais\n        if (finalAnswers[2] === 'morning') {\n             matching = products.filter(p => p.families && p.families.includes('Frais/Aquatique'));\n        }\n    }\n    \n    // Fallback if absolutely nothing found\n    if (matching.length === 0) {\n        matching = products; \n    }\n\n    // Select 3 random\n    const shuffled = [...matching].sort(() => 0.5 - Math.random());\n    setRecommendations(shuffled.slice(0, 3));\n  };\n\n  const handleAnswer = (value: string) => {\n    const newAnswers = { ...answers, [QUESTIONS[currentQuestionIndex].id]: value };\n    setAnswers(newAnswers);\n\n    if (currentQuestionIndex < QUESTIONS.length - 1) {\n        setCurrentQuestionIndex(prev => prev + 1);\n    } else {\n        calculateRecommendations(newAnswers);\n        setStep('loading');\n    }\n  };\n\n  const handleAddToCart = (id: string) => {\n    const product = products.find(p => p.id === id);\n    if (product) {\n      if (product.stock === 0) {\n        toast.error('Ce produit est actuellement en rupture de stock');\n        return;\n      }\n      addToCart({\n        id: product.id,\n        name: product.name,\n        brand: product.brand,\n        price: product.price,\n        image: product.image || product.image_url || '',\n        scent: product.scent,\n        category: product.category || 'mixte'\n      });\n      toast.success('Ajouté au panier');\n    }\n  };\n\n  // Hauteur fixe et contenue pour éviter l'effet \"massif\", sauf en mode results où on a besoin de place\n  const containerHeight = step === 'results' ? 'min-h-[600px]' : (step === 'intro' ? 'min-h-[160px]' : 'min-h-[380px]');\n\n  return (\n    <div className=\"w-full flex justify-center px-4 md:px-0 my-12 animate-fade-up\">\n       <motion.div\n        className={`relative w-full max-w-5xl bg-[#0a0a0a] rounded-sm overflow-hidden border border-white/5 shadow-2xl transition-all duration-700 ease-[0.22, 1, 0.36, 1] ${containerHeight}`}\n        layout\n      >\n        <AnimatePresence mode=\"wait\">\n            \n            {/* --- STEP 1: INTRO (Bandeau Luxe) --- */}\n            {step === 'intro' && (\n                <motion.div\n                    key=\"intro\"\n                    className=\"flex flex-col md:flex-row items-center justify-between px-8 py-10 md:py-8 gap-6 md:gap-12\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0, transition: { duration: 0.3 } }}\n                >\n                    <div className=\"flex flex-col items-center md:items-start text-center md:text-left space-y-3\">\n                        <span className=\"text-[10px] font-medium tracking-[0.25em] text-amber-200/60 uppercase\">\n                            Diagnostic Olfactif Haute Couture\n                        </span>\n                        \n                        <h2 className=\"font-serif text-2xl md:text-3xl text-[#F5F5F0] font-light leading-tight\">\n                            Trouvez votre signature\n                        </h2>\n                        \n                        <p className=\"text-xs text-neutral-500 font-light tracking-wide max-w-md\">\n                            Une expérience immersive pour révéler le parfum qui capture votre essence.\n                        </p>\n                    </div>\n\n                    <div className=\"flex-shrink-0\">\n                        <Button\n                            onClick={handleStart}\n                            className=\"bg-transparent border border-amber-200/30 text-amber-100 hover:bg-amber-900/10 hover:border-amber-200/60 hover:text-[#D4AF37] px-8 py-6 h-auto rounded-sm font-sans text-xs font-medium tracking-[0.15em] uppercase transition-all duration-500 ease-out group\"\n                        >\n                            Commencer l'expérience\n                            <span className=\"ml-3 opacity-50 group-hover:opacity-100 group-hover:translate-x-1 transition-all duration-500\">→</span>\n                        </Button>\n                    </div>\n                </motion.div>\n            )}\n\n            {/* --- STEP 2: QUIZ --- */}\n            {step === 'quiz' && (\n                <motion.div\n                    key=\"quiz\"\n                    className=\"absolute inset-0 flex flex-col items-center justify-center p-8 md:p-12 bg-[#0a0a0a]\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                    transition={{ duration: 0.5 }}\n                >\n                     <div className=\"w-full max-w-2xl\">\n                        <div className=\"flex justify-center mb-8\">\n                            <span className=\"text-[10px] text-neutral-600 tracking-[0.2em] uppercase font-light\">\n                                Question {currentQuestionIndex + 1} <span className=\"text-neutral-800 mx-2\">/</span> {QUESTIONS.length}\n                            </span>\n                        </div>\n                        \n                        <AnimatePresence mode=\"wait\">\n                          <motion.div\n                            key={currentQuestionIndex}\n                            variants={questionVariants}\n                            initial=\"initial\"\n                            animate=\"animate\"\n                            exit=\"exit\"\n                            className=\"mb-10\"\n                          >\n                            <h3 className=\"font-serif text-xl md:text-2xl text-[#F5F5F0] mb-6 text-center font-light\">\n                              {QUESTIONS[currentQuestionIndex].question}\n                            </h3>\n\n                            <motion.div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\" initial=\"initial\" animate=\"animate\" exit=\"exit\">\n                              {QUESTIONS[currentQuestionIndex].options.map((option) => (\n                                <motion.button\n                                  key={option.value}\n                                  onClick={() => handleAnswer(option.value)}\n                                  variants={optionVariant}\n                                  className=\"p-5 rounded-sm border border-white/5 bg-white/[0.02] hover:bg-white/[0.04] hover:border-amber-900/30 text-left transition-all duration-300 group active:scale-[0.99]\"\n                                >\n                                  <span className=\"flex justify-between items-center w-full\">\n                                    <span className=\"block text-xs md:text-sm text-neutral-400 group-hover:text-amber-100/90 font-light tracking-wide transition-colors\">\n                                      {option.label}\n                                    </span>\n                                    <span className=\"w-1.5 h-1.5 rounded-full bg-neutral-800 group-hover:bg-[#D4AF37] transition-colors duration-500\" />\n                                  </span>\n                                </motion.button>\n                              ))}\n                            </motion.div>\n                          </motion.div>\n                        </AnimatePresence>\n                     </div>\n                </motion.div>\n            )}\n\n            {/* --- STEP 3: LOADING --- */}\n            {step === 'loading' && (\n                <motion.div\n                    key=\"loading\"\n                    className=\"absolute inset-0 flex flex-col items-center justify-center bg-[#0a0a0a]\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    exit={{ opacity: 0 }}\n                >\n                    <FillingBottle onComplete={() => setStep('results')} />\n                </motion.div>\n            )}\n\n            {/* --- STEP 4: RESULTS --- */}\n            {step === 'results' && (\n                <motion.div\n                    key=\"results\"\n                    className=\"absolute inset-0 flex flex-col items-center justify-start p-8 md:p-12 bg-[#0a0a0a] overflow-y-auto\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 1 }}\n                    transition={{ duration: 0.8 }}\n                >\n                    <div className=\"text-center mb-10 mt-4\">\n                        <span className=\"text-[9px] text-amber-200/50 tracking-[0.25em] uppercase mb-4 block\">\n                            Votre signature olfactive\n                        </span>\n                        <h2 className=\"font-serif text-2xl md:text-3xl text-[#F5F5F0] mb-4 font-light\">\n                            Sélection Exclusive\n                        </h2>\n                        <p className=\"font-sans text-xs text-neutral-500 max-w-lg mx-auto font-light leading-relaxed tracking-wide\">\n                            Basé sur vos préférences pour {answers[3] === 'floral' ? 'les fleurs blanches' : answers[3] === 'woody' ? 'les bois précieux' : answers[3] === 'spicy' ? 'les épices' : 'la vanille'}, voici nos recommandations.\n                        </p>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 w-full max-w-4xl mx-auto mb-10\">\n                        {recommendations.map((product, index) => (\n                             <motion.div\n                                key={product.id}\n                                initial={{ opacity: 0, y: 20 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                transition={{ delay: index * 0.1 }}\n                                className=\"bg-white rounded-xl p-2 shadow-lg\"\n                             >\n                                <ProductCard\n                                    id={product.id}\n                                    name={product.name}\n                                    brand={product.brand}\n                                    price={product.price}\n                                    image={product.image || product.image_url || ''}\n                                    scent={product.scent}\n                                    stock={product.stock}\n                                    notes={product.notes}\n                                    notes_tete={product.notes_tete}\n                                    notes_coeur={product.notes_coeur}\n                                    notes_fond={product.notes_fond}\n                                    families={product.families}\n                                    onAddToCart={handleAddToCart}\n                                />\n                             </motion.div>\n                        ))}\n                        {recommendations.length === 0 && (\n                             <div className=\"col-span-3 text-center text-neutral-500 text-sm\">\n                                 Aucun résultat trouvé pour cette combinaison.\n                             </div>\n                        )}\n                    </div>\n\n                    <div className=\"flex justify-center pb-8\">\n                        <Button \n                            onClick={handleRestart} \n                            variant=\"outline\" \n                            className=\"border-white/10 text-neutral-400 hover:text-white hover:bg-white/5 px-6 py-4 rounded-sm bg-transparent text-[10px] tracking-widest uppercase\"\n                        >\n                            <RotateCcw className=\"w-3 h-3 mr-2\" />\n                            Recommencer\n                        </Button>\n                    </div>\n                </motion.div>\n            )}\n\n        </AnimatePresence>\n\n        {isSpraying && <SprayBurst onComplete={() => {}} />}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default DiagnosticRitual;\n"],"names":["QUESTIONS","questionVariants","optionVariant","SprayBurst","onComplete","jsxs","motion","jsx","_","i","FillingBottle","DiagnosticRitual","step","setStep","useState","isSpraying","setIsSpraying","currentQuestionIndex","setCurrentQuestionIndex","answers","setAnswers","recommendations","setRecommendations","products","isInitialized","initializeProducts","useAdminStore","addToCart","useCart","useNavigate","useEffect","handleStart","handleRestart","calculateRecommendations","finalAnswers","matter","family","matching","p","shuffled","handleAnswer","value","newAnswers","prev","handleAddToCart","id","product","toast","containerHeight","AnimatePresence","Button","option","index","ProductCard","RotateCcw"],"mappings":"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"}